export const questions = [
  {
    id: 1,
    question: "It's Saturday morning. What's your ideal start to the day?",
    options: [
      { text: "5 AM run followed by a full breakfast", traits: { energy: 5, discipline: 4 } },
      { text: "Sleep in, then a lazy brunch with friends", traits: { social: 3, independence: 2 } },
      { text: "Up early to work on a personal project", traits: { intelligence: 4, independence: 4 } },
      { text: "Whatever my partner/family wants to do", traits: { loyalty: 5, social: 3 } },
    ],
  },
  {
    id: 2,
    question: "You're at a party. Where do you find yourself?",
    options: [
      { text: "Center of attention, telling stories", traits: { social: 5, energy: 4 } },
      { text: "Deep conversation with one or two people", traits: { loyalty: 4, intelligence: 3 } },
      { text: "Checking out the snack table strategically", traits: { independence: 3, playfulness: 3 } },
      { text: "By the door, ready to leave at any moment", traits: { independence: 5, guardedness: 4 } },
    ],
  },
  {
    id: 3,
    question: "A friend calls you at 2 AM needing help. You...",
    options: [
      { text: "Already grabbing my keys", traits: { loyalty: 5, energy: 3 } },
      { text: "Talk them through it on the phone", traits: { intelligence: 4, loyalty: 3 } },
      { text: "Help, but remind them about boundaries tomorrow", traits: { independence: 3, discipline: 3 } },
      { text: "Send a supportive text, call them in the morning", traits: { independence: 4, guardedness: 2 } },
    ],
  },
  {
    id: 4,
    question: "Your approach to exercise is...",
    options: [
      { text: "Intense daily workouts — I need to move!", traits: { energy: 5, discipline: 5 } },
      { text: "Team sports — it's about the camaraderie", traits: { social: 4, playfulness: 4 } },
      { text: "Yoga or swimming — mindful movement", traits: { intelligence: 3, independence: 3 } },
      { text: "Does walking to the fridge count?", traits: { playfulness: 2, independence: 3 } },
    ],
  },
  {
    id: 5,
    question: "Someone cuts you off in traffic. Your reaction?",
    options: [
      { text: "Protective honk — nobody endangers my passengers", traits: { guardedness: 5, loyalty: 4 } },
      { text: "Shrug it off, life's too short", traits: { playfulness: 3, independence: 3 } },
      { text: "Analyze what they did wrong, mentally", traits: { intelligence: 4, discipline: 2 } },
      { text: "Speed up and give them a look", traits: { energy: 4, guardedness: 3 } },
    ],
  },
  {
    id: 6,
    question: "Your dream vacation looks like...",
    options: [
      { text: "Hiking Patagonia or climbing Kilimanjaro", traits: { energy: 5, independence: 4 } },
      { text: "Beach resort with my closest people", traits: { social: 4, loyalty: 4 } },
      { text: "Exploring museums and cafés in a European city", traits: { intelligence: 5, playfulness: 3 } },
      { text: "Cabin in the woods, just me and a good book", traits: { independence: 5, guardedness: 3 } },
    ],
  },
  {
    id: 7,
    question: "At work, people describe you as...",
    options: [
      { text: "The one who never stops working", traits: { energy: 4, discipline: 5 } },
      { text: "The team player everyone relies on", traits: { loyalty: 5, social: 4 } },
      { text: "The creative problem-solver", traits: { intelligence: 5, playfulness: 3 } },
      { text: "The quiet one who delivers results", traits: { independence: 4, guardedness: 3 } },
    ],
  },
  {
    id: 8,
    question: "Your ideal weekend evening?",
    options: [
      { text: "Game night with a big group of friends", traits: { social: 5, playfulness: 5 } },
      { text: "Dinner with my partner or best friend", traits: { loyalty: 5, social: 2 } },
      { text: "Binge-watching a documentary series solo", traits: { intelligence: 3, independence: 4 } },
      { text: "Out dancing until the venue closes", traits: { energy: 5, social: 4 } },
    ],
  },
  {
    id: 9,
    question: "A stranger approaches you on the street. You...",
    options: [
      { text: "Smile and start chatting immediately", traits: { social: 5, playfulness: 3 } },
      { text: "Politely engage but stay alert", traits: { guardedness: 4, loyalty: 2 } },
      { text: "Help if they need it, then move on", traits: { independence: 3, discipline: 3 } },
      { text: "Avoid eye contact and keep walking", traits: { guardedness: 5, independence: 4 } },
    ],
  },
  {
    id: 10,
    question: "When learning something new, you prefer to...",
    options: [
      { text: "Jump in and figure it out hands-on", traits: { energy: 4, playfulness: 4 } },
      { text: "Study the theory first, then practice", traits: { intelligence: 5, discipline: 4 } },
      { text: "Learn alongside someone who already knows", traits: { social: 3, loyalty: 3 } },
      { text: "Watch tutorials alone at my own pace", traits: { independence: 4, intelligence: 3 } },
    ],
  },
  {
    id: 11,
    question: "Your phone rings. It's an unknown number. You...",
    options: [
      { text: "Answer immediately — could be exciting!", traits: { social: 4, energy: 3 } },
      { text: "Let it go to voicemail, then decide", traits: { guardedness: 4, intelligence: 3 } },
      { text: "Google the number first", traits: { intelligence: 4, guardedness: 3 } },
      { text: "Answer it — I'm always available for people", traits: { loyalty: 4, social: 3 } },
    ],
  },
  {
    id: 12,
    question: "How do you handle conflict?",
    options: [
      { text: "Face it head-on, directly and honestly", traits: { energy: 4, guardedness: 4 } },
      { text: "Try to find a compromise everyone likes", traits: { social: 4, loyalty: 3 } },
      { text: "Analyze the situation before responding", traits: { intelligence: 5, discipline: 3 } },
      { text: "Avoid it — life's too short for drama", traits: { playfulness: 3, independence: 4 } },
    ],
  },
  {
    id: 13,
    question: "Your fridge is most likely to contain...",
    options: [
      { text: "Meal-prepped containers labeled by day", traits: { discipline: 5, intelligence: 3 } },
      { text: "Whatever's trending on food TikTok", traits: { playfulness: 4, social: 3 } },
      { text: "Basics — I eat to live, not live to eat", traits: { independence: 3, discipline: 2 } },
      { text: "Enough to host an impromptu dinner party", traits: { social: 5, loyalty: 4 } },
    ],
  },
];

export const breeds = [
  {
    id: "golden-retriever",
    name: "Golden Retriever",
    apiBreed: "retriever/golden",
    localImage: "/dogs/golden-retriever.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/d_dNvBD0R.jpg",
    description:
      "You're the Golden Retriever of people — warm, loyal, and the kind of person everyone wants at their party. You light up a room with your genuine friendliness and have an almost supernatural ability to make people feel welcome. Your loyalty runs deep, and your friends know they can count on you no matter what.",
    traits: ["Loyal", "Social", "Friendly", "Energetic", "People-pleaser"],
    weights: { loyalty: 5, social: 5, energy: 3, playfulness: 3, intelligence: 2, independence: 1, guardedness: 1, discipline: 2 },
  },
  {
    id: "border-collie",
    name: "Border Collie",
    apiBreed: "collie/border",
    localImage: "/dogs/border-collie.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/BkE6Wg5E7.jpg",
    description:
      "You're a Border Collie — the brilliant overachiever of the personality world. Your mind is always running, always solving, always optimizing. You thrive on challenges and get restless without mental stimulation. People are amazed by how quickly you pick things up and how much you can get done in a day.",
    traits: ["Intelligent", "Driven", "Focused", "Energetic", "Problem-solver"],
    weights: { intelligence: 5, energy: 5, discipline: 5, loyalty: 3, social: 2, playfulness: 2, independence: 3, guardedness: 1 },
  },
  {
    id: "labrador",
    name: "Labrador Retriever",
    apiBreed: "labrador",
    localImage: "/dogs/labrador.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/hd5tL4zFqW.jpg",
    description:
      "You're a Lab! Life is your playground, and everyone's invited. You approach every day with infectious enthusiasm and genuine joy. You're the friend who suggests the group activity, brings the snacks, and makes sure nobody's left out. Your playfulness is your superpower.",
    traits: ["Playful", "Social", "Enthusiastic", "Loyal", "Fun-loving"],
    weights: { playfulness: 5, social: 5, energy: 4, loyalty: 4, intelligence: 2, independence: 1, guardedness: 1, discipline: 1 },
  },
  {
    id: "german-shepherd",
    name: "German Shepherd",
    apiBreed: "german/shepherd",
    localImage: "/dogs/german-shepherd.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/-qOqBA-Un.jpg",
    description:
      "You're a German Shepherd — fiercely protective, deeply loyal, and impressively capable. You take your responsibilities seriously and the people in your inner circle know they have an unwavering guardian. You might seem intimidating to strangers, but those who earn your trust discover a deeply devoted companion.",
    traits: ["Protective", "Loyal", "Brave", "Disciplined", "Devoted"],
    weights: { guardedness: 5, loyalty: 5, discipline: 4, energy: 3, intelligence: 3, social: 1, playfulness: 1, independence: 2 },
  },
  {
    id: "husky",
    name: "Siberian Husky",
    apiBreed: "husky",
    localImage: "/dogs/husky.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/T3mbY3ZONG.jpg",
    description:
      "You're a Husky — independent, adventurous, and absolutely unstoppable when you set your mind on something. You march to the beat of your own drum and have an energy that's both impressive and slightly exhausting to those around you. Freedom is your love language.",
    traits: ["Independent", "Adventurous", "Energetic", "Free-spirited", "Vocal"],
    weights: { independence: 5, energy: 5, playfulness: 3, guardedness: 2, intelligence: 2, social: 2, loyalty: 2, discipline: 1 },
  },
  {
    id: "poodle",
    name: "Poodle",
    apiBreed: "poodle/standard",
    localImage: "/dogs/poodle.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/HJq5ke5Nm.jpg",
    description:
      "You're a Poodle — far more than meets the eye. Behind your polished exterior is one of the sharpest minds in the room. You're elegant, witty, and adaptable. You can hold court at a gala or curl up with a complex novel, and you excel at both. Don't let anyone underestimate you.",
    traits: ["Intelligent", "Elegant", "Adaptable", "Witty", "Refined"],
    weights: { intelligence: 5, social: 4, discipline: 4, playfulness: 2, independence: 3, loyalty: 3, energy: 1, guardedness: 1 },
  },
  {
    id: "beagle",
    name: "Beagle",
    apiBreed: "beagle",
    localImage: "/dogs/beagle.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/CVbP_4N2Z.jpg",
    description:
      "You're a Beagle — curious, cheerful, and always following your nose toward the next adventure. You have an insatiable curiosity that leads you to the most interesting discoveries. You're great company, easy to get along with, and you bring a lighthearted energy wherever you go.",
    traits: ["Curious", "Cheerful", "Friendly", "Adventurous", "Easy-going"],
    weights: { playfulness: 5, social: 4, energy: 3, independence: 3, intelligence: 3, loyalty: 3, guardedness: 1, discipline: 1 },
  },
  {
    id: "shiba-inu",
    name: "Shiba Inu",
    apiBreed: "shiba",
    localImage: "/dogs/shiba-inu.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/eXOAOSOt9e.jpg",
    description:
      "You're a Shiba Inu — confident, independent, and delightfully particular about everything. You have exquisite taste and high standards, and you're not afraid to walk away from anything that doesn't meet them. You're selective about your inner circle, but incredibly devoted to those who make the cut.",
    traits: ["Independent", "Confident", "Selective", "Clean", "Bold"],
    weights: { independence: 5, guardedness: 5, intelligence: 3, discipline: 3, loyalty: 2, playfulness: 2, social: 1, energy: 2 },
  },
  {
    id: "corgi",
    name: "Pembroke Welsh Corgi",
    apiBreed: "corgi/cardigan",
    localImage: "/dogs/corgi.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/SkJj7e547.jpg",
    description:
      "You're a Corgi — small in stature but enormous in personality. You're surprisingly bold, endlessly entertaining, and way more athletic than people expect. You've got a natural authority about you and a sense of humor that keeps everyone on their toes. Never underestimate a Corgi person.",
    traits: ["Bold", "Entertaining", "Loyal", "Spirited", "Surprising"],
    weights: { playfulness: 4, loyalty: 4, social: 4, energy: 3, intelligence: 3, discipline: 2, independence: 2, guardedness: 1 },
  },
  {
    id: "great-dane",
    name: "Great Dane",
    apiBreed: "dane/great",
    localImage: "/dogs/great-dane.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/dSaV-OCxy.jpg",
    description:
      "You're a Great Dane — a gentle giant with a heart as big as your presence. You might be imposing at first glance, but you're really just a softie who wants to be close to the people you love. You're calm, patient, and have a quiet confidence that puts everyone at ease.",
    traits: ["Gentle", "Patient", "Calm", "Affectionate", "Majestic"],
    weights: { loyalty: 4, social: 3, guardedness: 3, discipline: 3, independence: 2, intelligence: 2, playfulness: 2, energy: 1 },
  },
  {
    id: "australian-shepherd",
    name: "Australian Shepherd",
    apiBreed: "australian/shepherd",
    localImage: "/dogs/australian-shepherd.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/B1-llgq4m.jpg",
    description:
      "You're an Australian Shepherd — energetic, brilliant, and always looking for the next task to master. You thrive when you have a purpose and can get restless without one. You're incredibly versatile, equally at home leading a team project or going on a solo adventure.",
    traits: ["Versatile", "Smart", "Energetic", "Driven", "Loyal"],
    weights: { energy: 5, intelligence: 4, loyalty: 4, discipline: 3, playfulness: 3, social: 2, independence: 2, guardedness: 1 },
  },
  {
    id: "dachshund",
    name: "Dachshund",
    apiBreed: "dachshund",
    localImage: "/dogs/dachshund.jpg",
    fallbackImage: "https://cdn2.thedogapi.com/images/HJ7Pzg5EQ.jpg",
    description:
      "You're a Dachshund — brave, stubborn, and absolutely hilarious without trying. You have a personality ten times your size and you're not afraid to let everyone know it. You're fiercely independent but deeply devoted to your chosen people. You do things your way, always.",
    traits: ["Brave", "Stubborn", "Funny", "Devoted", "Independent"],
    weights: { independence: 4, guardedness: 4, playfulness: 4, loyalty: 3, energy: 2, intelligence: 2, social: 2, discipline: 1 },
  },
];

export function calculateResult(answers) {
  const traitScores = {
    energy: 0,
    social: 0,
    loyalty: 0,
    playfulness: 0,
    intelligence: 0,
    independence: 0,
    guardedness: 0,
    discipline: 0,
  };

  for (const answer of answers) {
    for (const [trait, value] of Object.entries(answer.traits)) {
      traitScores[trait] = (traitScores[trait] || 0) + value;
    }
  }

  // Normalize scores
  const maxPossible = Math.max(...Object.values(traitScores));
  const normalized = {};
  for (const [trait, score] of Object.entries(traitScores)) {
    normalized[trait] = maxPossible > 0 ? score / maxPossible : 0;
  }

  // Score each breed using cosine-like similarity
  let bestBreed = breeds[0];
  let bestScore = -Infinity;

  for (const breed of breeds) {
    let dotProduct = 0;
    let breedMag = 0;
    let userMag = 0;

    for (const trait of Object.keys(traitScores)) {
      const userVal = normalized[trait] || 0;
      const breedVal = (breed.weights[trait] || 0) / 5;
      dotProduct += userVal * breedVal;
      breedMag += breedVal * breedVal;
      userMag += userVal * userVal;
    }

    const magnitude = Math.sqrt(breedMag) * Math.sqrt(userMag);
    const score = magnitude > 0 ? dotProduct / magnitude : 0;

    if (score > bestScore) {
      bestScore = score;
      bestBreed = breed;
    }
  }

  return { breed: bestBreed, traitScores, matchScore: Math.round(bestScore * 100) };
}
